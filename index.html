<!DOCTYPE html>
<html lang="bn" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSFMA ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏ ‡¶¨‡¶æ‡¶®‡ßç‡¶°‡¶≤ (‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶°‡ßá‡¶Æ‡ßã)</title>
    
    <!-- Combined Logo Favicon (Book + Focus + Star) - This is the logo you requested. -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none'%3E%3C!-- Base (Book) --%3E%3Cpath d='M2 6V20C2 21.1046 2.89543 22 4 22H20C21.1046 22 22 21.1046 22 20V6C22 4.89543 21.1046 4 20 4H4C2.89543 4 2 4.89543 2 6Z' fill='%236EE7B7' opacity='0.7'/%3E%3C!-- Focus Ring (Magnifier) --%3E%3Ccircle cx='12' cy='12' r='4.5' stroke='%233B82F6' stroke-width='1.5'/%3E%3Cpath d='M15 15L18 18' stroke='%233B82F6' stroke-width='1.5' stroke-linecap='round'/%3E%3C!-- Success Star (Top) --%3E%3Cpath d='M12 7L13.8861 10.8861L18 12L13.8861 13.8861L12 18L10.1139 13.8861L6 12L10.1139 10.1139L12 7Z' fill='%23FBBF24' stroke='%23FBBF24' stroke-width='0.5'/%3E%3C/svg%3E" type="image/svg+xml">
    
    <!-- Chosen Palette: Soothing Sage -->
    <!-- Application Structure Plan: Combined Report Dashboard and Guardian App Mockup in one file, accessible via tabs. This allows the user to view the static report data (Dashboard) and the interactive live app simulation (Guardian App) without navigating away. -->
    <!-- Visualization & Content Choices: The core Interactive Report structure is maintained. A new top-level tab is added to switch between the "Report Dashboard" and the "Guardian App Mockup" (which uses the previously generated Bluetooth app UI with simulated data). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f4f4f0;
            color: #3e4444;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 45vh;
            max-height: 450px;
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            border-bottom-color: #588157;
            color: #344e41;
        }
        .workflow-step {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .workflow-step.active, .workflow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #588157;
        }
        .arrow {
            color: #a3b18a;
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content-wrapper {
            transition: transform 0.3s ease;
        }
        .tab-button {
             transition: all 0.2s;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#dad7cd] shadow-sm sticky top-0 z-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row items-start md:items-center justify-between py-3">
                <div class="flex items-center mb-2 md:mb-0">
                    <span class="text-3xl mr-3">üéØ</span>
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold text-[#344e41]">SSFMA ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏</h1>
                        <p class="text-sm text-[#588157]">SSFMA ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶ó‡¶æ‡¶∞‡ßç‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶°‡ßá‡¶Æ‡ßã</p>
                    </div>
                </div>
                <!-- Main Navigation Tabs -->
                <nav class="flex space-x-2 md:space-x-4">
                    <button id="tab-report" data-target="report-view" class="tab-button px-3 py-2 text-sm font-semibold rounded-lg bg-[#588157] text-white">
                        üìä ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
                    </button>
                    <button id="tab-app" data-target="app-view" class="tab-button px-3 py-2 text-sm font-semibold rounded-lg bg-white text-[#344e41] hover:bg-gray-100">
                        üì± ‡¶ó‡¶æ‡¶∞‡ßç‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶°‡ßá‡¶Æ‡ßã
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">

        <!-- REPORT VIEW (Interactive Report Content) -->
        <div id="report-view" class="view-content">

            <!-- Sub Navigation for Report -->
            <nav id="report-nav" class="flex flex-wrap justify-center border-b border-gray-300 mb-8 space-x-2 md:space-x-4">
                <a href="#dashboard" class="nav-link font-semibold p-2 active">‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</a>
                <a href="#features" class="nav-link font-semibold p-2">‡¶´‡¶ø‡¶ö‡¶æ‡¶∞</a>
                <a href="#workflow" class="nav-link font-semibold p-2">‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶™‡ßç‡¶∞‡¶£‡¶æ‡¶≤‡ßÄ</a>
                <a href="#analysis" class="nav-link font-semibold p-2">‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£</a>
                <a href="#hardware" class="nav-link font-semibold p-2">‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞</a>
            </nav>

             <!-- Section 1: Live Dashboard -->
            <section id="dashboard" class="mb-12">
                 <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#3a5a40]">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ (‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶®)</h2>
                    <p class="text-md text-gray-600 mt-2">‡¶è‡¶á ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡¶ü‡¶ø SSFMA ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶≠‡¶ø‡¶â ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßá‡•§</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                        <div class="bg-green-100 p-4 rounded-full"><span class="text-3xl">üí°</span></div>
                        <div>
                            <p class="text-sm text-gray-500 font-medium">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ</p>
                            <p id="current-status" class="text-2xl font-bold text-[#344e41]">‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶ö‡¶≤‡¶õ‡ßá</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                         <div class="bg-yellow-100 p-4 rounded-full"><span class="text-3xl">‚≠ê</span></div>
                        <div>
                            <p class="text-sm text-gray-500 font-medium">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</p>
                            <p id="focus-points" class="text-2xl font-bold text-[#344e41]">‡ßß‡ß®‡ß´</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                         <div class="bg-blue-100 p-4 rounded-full"><span class="text-3xl">‚è∞</span></div>
                        <div>
                            <p class="text-sm text-gray-500 font-medium">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ</p>
                            <p id="study-time" class="text-2xl font-bold text-[#344e41]">‡ß® ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡ß©‡ß´ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</p>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                         <div class="bg-red-100 p-4 rounded-full"><span class="text-3xl">‚ö†Ô∏è</span></div>
                        <div>
                            <p class="text-sm text-gray-500 font-medium">‡¶°‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü</p>
                            <p id="distraction-alerts" class="text-2xl font-bold text-[#344e41]">‡ß©</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Features Deep Dive -->
            <section id="features" class="mb-12 bg-white p-6 sm:p-8 rounded-lg shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#3a5a40]">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
                    <p class="text-md text-gray-600 mt-2">SSFMA ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶π‡¶≤‡ßã ‡¶è‡¶∞ ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã‡•§ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡ßÅ‡¶®‡•§</p>
                </div>
                <div class="border-b border-gray-200">
                    <nav id="features-nav" class="-mb-px flex justify-center space-x-4 md:space-x-8" aria-label="Tabs">
                        <button data-target="feature-detection" class="feature-tab nav-link whitespace-nowrap py-4 px-1 font-medium text-lg active">‡¶°‡¶ø‡¶∏‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§‡¶ï‡¶∞‡¶£</button>
                        <button data-target="feature-motivation" class="feature-tab nav-link whitespace-nowrap py-4 px-1 font-medium text-lg">‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</button>
                        <button data-target="feature-system" class="feature-tab nav-link whitespace-nowrap py-4 px-1 font-medium text-lg">‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶ì ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</button>
                    </nav>
                </div>
                <div id="features-content" class="mt-8">
                    <!-- Content will be injected by JS -->
                </div>
            </section>

            <!-- Section 3: Interactive Workflow -->
            <section id="workflow" class="mb-12">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#3a5a40]">‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶™‡ßç‡¶∞‡¶£‡¶æ‡¶≤‡ßÄ (Workflow)</h2>
                    <p class="text-md text-gray-600 mt-2">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶ß‡¶æ‡¶™‡ßá ‡¶ß‡¶æ‡¶™‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶§‡¶æ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mb-6">
                    <div id="workflow-step-1" class="workflow-step bg-white p-4 rounded-lg shadow-md border-2 border-transparent w-full md:w-1/5 text-center">
                        <span class="text-4xl">üßë‚Äçüíª</span>
                        <h3 class="font-bold mt-2">‡¶ß‡¶æ‡¶™ ‡ßß: ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø</h3>
                    </div>
                    <div class="text-4xl font-light arrow">‚Üí</div>
                    <div id="workflow-step-2" class="workflow-step bg-white p-4 rounded-lg shadow-md border-2 border-transparent w-full md:w-1/5 text-center">
                        <span class="text-4xl">üßê</span>
                        <h3 class="font-bold mt-2">‡¶ß‡¶æ‡¶™ ‡ß®: ‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£</h3>
                    </div>
                     <div class="text-4xl font-light arrow">‚Üí</div>
                    <div id="workflow-step-3" class="workflow-step bg-white p-4 rounded-lg shadow-md border-2 border-transparent w-full md:w-1/5 text-center">
                        <span class="text-4xl">‚è≥</span>
                        <h3 class="font-bold mt-2">‡¶ß‡¶æ‡¶™ ‡ß©: ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶∂‡ßÅ‡¶∞‡ßÅ</h3>
                    </div>
                    <div class="text-4xl font-light arrow">‚Üí</div>
                     <div id="workflow-step-4" class="workflow-step bg-white p-4 rounded-lg shadow-md border-2 border-transparent w-full md:w-1/5 text-center">
                        <span class="text-4xl">üö®</span>
                        <h3 class="font-bold mt-2">‡¶ß‡¶æ‡¶™ ‡ß™: ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç</h3>
                    </div>
                </div>
                <div id="workflow-details" class="bg-white p-6 rounded-lg shadow-inner min-h-[100px] text-center flex items-center justify-center">
                    <p class="text-gray-700">‡¶è‡¶ï‡¶ü‡¶ø ‡¶ß‡¶æ‡¶™ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                </div>
            </section>

            <!-- Section 4: Data Analysis -->
            <section id="analysis" class="mb-12 bg-white p-6 sm:p-8 rounded-lg shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#3a5a40]">‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£</h2>
                    <p class="text-md text-gray-600 mt-2">‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶°‡ßá‡¶ü‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡•§ ‡¶®‡¶ø‡¶ö‡ßá ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
                </div>
                <div class="flex justify-center mb-4">
                    <div class="inline-flex rounded-md shadow-sm">
                        <button id="show-minutes" class="px-4 py-2 text-sm font-medium text-white bg-[#588157] border border-gray-200 rounded-l-lg hover:bg-[#3a5a40] focus:z-10 focus:ring-2 focus:ring-[#588157]">‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</button>
                        <button id="show-points" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border-t border-b border-r border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-[#588157] rounded-r-lg">‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="performanceChart"></canvas>
                </div>
            </section>

            <!-- Section 5: Hardware Overview -->
            <section id="hardware">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#3a5a40]">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞</h2>
                    <p class="text-md text-gray-600 mt-2">‡¶™‡ßç‡¶∞‡¶ï‡¶≤‡ßç‡¶™‡¶ü‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                </div>
                <div id="hardware-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                    <!-- Hardware cards will be injected by JS -->
                </div>
            </section>
        </div>

        <!-- GUARDIAN APP VIEW (Bluetooth Demo) -->
        <div id="app-view" class="view-content hidden">
            <h2 class="text-3xl font-bold text-[#3a5a40] text-center mb-8">üì± SSFMA Guardian App ‡¶°‡ßá‡¶Æ‡ßã</h2>
            <p class="text-md text-gray-600 mt-2 text-center mb-8">‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶≤‡ßÅ‡¶ü‡ßÅ‡¶• ‡¶ó‡¶æ‡¶∞‡ßç‡¶°‡¶ø‡ßü‡¶æ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶á‡¶â‡¶Ü‡¶á‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá "Arduino-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶≤‡ßÅ‡¶ü‡ßÅ‡¶• ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§</p>

            <div id="app-root" class="w-full mx-auto max-w-screen-md">
                <!-- React/Simulated UI goes here -->
                <div class="bg-gray-900 p-6 rounded-xl shadow-2xl">
                    <header class="mb-6">
                        <h1 class="text-3xl font-extrabold text-white mb-1">
                            SSFMA Guardian App
                        </h1>
                        <p class="text-sm text-gray-400">
                            ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏ (Simulated Bluetooth)
                        </p>
                    </header>

                    <!-- Connection Status Card -->
                    <div class="mb-6 bg-gray-800 p-4 rounded-xl shadow-xl border border-gray-700">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-3">
                                <span id="bt-status-light" class="h-3 w-3 rounded-full bg-red-500"></span>
                                <p class="text-sm font-semibold text-gray-300">
                                    Bluetooth ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: <span id="bt-status-text" class="font-bold text-white">Disconnected</span>
                                </p>
                            </div>
                            <button
                                id="app-connect-btn"
                                class="px-4 py-2 text-xs font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition duration-150"
                            >
                                Arduino-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó
                            </button>
                        </div>
                    </div>

                    <!-- Live Status and Stats -->
                    <div class="bg-gray-800 p-6 rounded-xl shadow-2xl mb-6 border border-gray-700">
                        <div class="flex items-center space-x-4 mb-4">
                            <i id="app-current-icon" class="fa-solid fa-plug-circle-xmark text-4xl text-gray-600 w-12 h-12 flex items-center justify-center"></i>
                            <div>
                                <p class="text-xs text-gray-400 uppercase">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</p>
                                <p id="app-current-label" class="text-2xl font-extrabold text-gray-600">Disconnected</p>
                            </div>
                        </div>
                        
                        <hr class="border-gray-700 my-4" />
                        
                        <!-- Daily Goal Progress Bar -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center text-sm mb-1">
                                <p class="font-medium text-white">‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶´‡ßã‡¶ï‡¶æ‡¶∏</p>
                                <p id="app-progress-text" class="text-gray-400">0% ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® (0h 0m / 60m)</p>
                            </div>
                            <div class="bg-gray-700 rounded-lg h-2">
                                <div 
                                    id="app-progress-bar"
                                    class="h-2 rounded-lg bg-pink-500 transition-all duration-500"
                                    style="width: 0%"
                                ></div>
                            </div>
                            <p id="app-goal-achieved" class="text-xs text-green-400 mt-2 font-semibold hidden flex items-center">
                                <i class="fa-solid fa-circle-check mr-1 text-sm"></i>
                                ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!
                            </p>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center space-x-4">
                                <div class="p-3 rounded-full text-pink-400 bg-opacity-20"><i class="fa-solid fa-clock text-2xl w-8 h-8 flex items-center justify-center"></i></div>
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase">‡¶Æ‡ßã‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ</p>
                                    <p id="app-study-time" class="text-2xl font-bold text-white">0h 0m</p>
                                </div>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center space-x-4">
                                <div class="p-3 rounded-full text-yellow-400 bg-opacity-20"><i class="fa-solid fa-star text-2xl w-8 h-8 flex items-center justify-center"></i></div>
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase">‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</p>
                                    <p id="app-focus-points" class="text-2xl font-bold text-white">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Remote Commands -->
                    <h2 class="text-xl font-bold text-white mb-4">‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶°‡¶∏</h2>

                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                        <button id="app-silent-btn" data-cmd="silent" class="cmd-btn flex flex-col items-center justify-center p-3 sm:p-4 rounded-xl shadow-md transition duration-200 bg-gray-600 hover:bg-gray-700 text-white font-semibold h-24 disabled:opacity-40 disabled:cursor-not-allowed">
                             <i id="app-silent-icon" class="mb-1 text-3xl fa-solid fa-volume-off"></i>
                            <span id="app-silent-label" class="text-xs font-medium text-center">‡¶∏‡¶æ‡¶á‡¶≤‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßã‡¶°</span>
                        </button>
                        <button data-cmd="motivation" class="cmd-btn flex flex-col items-center justify-center p-3 sm:p-4 rounded-xl shadow-md transition duration-200 bg-green-600 hover:bg-green-700 text-white font-semibold h-24 disabled:opacity-40 disabled:cursor-not-allowed">
                            <i class="mb-1 text-3xl fa-solid fa-bell-concierge"></i>
                            <span class="text-xs font-medium text-center">‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®</span>
                        </button>
                        <button id="app-reset-btn" data-cmd="reset" class="cmd-btn flex flex-col items-center justify-center p-3 sm:p-4 rounded-xl shadow-md transition duration-200 bg-red-600 hover:bg-red-700 text-white font-semibold h-24 disabled:opacity-40 disabled:cursor-not-allowed">
                            <i class="mb-1 text-3xl fa-solid fa-arrows-rotate"></i>
                            <span class="text-xs font-medium text-center">‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</span>
                        </button>
                        <button data-cmd="status" class="cmd-btn flex flex-col items-center justify-center p-3 sm:p-4 rounded-xl shadow-md transition duration-200 bg-blue-600 hover:bg-blue-700 text-white font-semibold h-24 disabled:opacity-40 disabled:cursor-not-allowed">
                            <i class="mb-1 text-3xl fa-solid fa-arrows-rotate"></i>
                            <span class="text-xs font-medium text-center">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂</span>
                        </button>
                    </div>

                     <!-- Debug/Info Section -->
                    <h2 class="text-xl font-bold text-white mt-8 mb-4">‡¶°‡¶ø‡¶¨‡¶æ‡¶ó ‡¶≤‡¶ó</h2>
                    <div class="bg-gray-800 p-4 rounded-xl text-xs overflow-x-auto text-gray-400 border border-gray-700">
                        <pre id="app-debug-log" class="whitespace-pre-wrap break-words">‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</pre>
                    </div>

                </div>
            </div>

        </div>

    </main>

    <!-- Modal Structure (Used by both views) -->
    <div id="unified-modal" class="fixed inset-0 z-30 flex items-center justify-center p-4 hidden">
        <div id="modal-backdrop" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 opacity-0"></div>
        <div id="modal-content" class="modal-content-wrapper bg-white rounded-lg shadow-xl w-full max-w-sm p-6 z-40 transform scale-95">
            <div class="flex justify-between items-start">
                 <div>
                    <h3 id="modal-title" class="text-2xl font-bold text-[#344e41]"></h3>
                    <p id="modal-feature" class="text-sm font-semibold text-[#588157] mt-1"></p>
                </div>
                <button id="modal-close-btn" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <p id="modal-description" class="mt-4 text-gray-700"></p>
             <div id="modal-action-buttons" class="flex justify-end space-x-3 mt-4 hidden">
                <button id="modal-confirm" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-150">‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button id="modal-cancel" class="px-4 py-2 bg-gray-700 text-white font-semibold rounded-lg hover:bg-gray-600 transition duration-150">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Unified Data Source ---
            const ssfmaData = {
                features: {
                    'feature-detection': {
                        title: 'üéØ ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶´‡¶ø‡¶â‡¶∂‡¶®',
                        icon: 'üì°',
                        content: 'SSFMA ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§ ‡¶è‡¶ü‡¶ø IR (‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø), PIR (‡¶®‡¶°‡¶º‡¶æ‡¶ö‡¶°‡¶º‡¶æ), Ultrasonic (‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨) ‡¶è‡¶¨‡¶Ç Sound (‡¶∂‡¶¨‡ßç‡¶¶) ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶á ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø‡¶∞ ‡¶´‡¶≤‡ßá ‡¶≠‡ßÅ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ ‡¶ï‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶Ü‡¶∏‡¶≤ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ö‡ßá‡¶Ø‡¶º‡¶æ‡¶∞‡ßá ‡¶¨‡¶∏‡ßá ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ) ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§'
                    },
                    'feature-motivation': {
                        title: 'üí° ‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶ì ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ',
                        icon: 'üèÜ',
                        content: '‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá SSFMA ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ï‡ßå‡¶∂‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡•§ LCD ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá‡¶§‡ßá ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø (üòä/üòü) ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßÅ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶£‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡•§ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶∏‡ßá‡¶∂‡¶® ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡¶≤‡ßá DFPlayer Mini ‡¶Æ‡¶°‡¶ø‡¶â‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶ï‡ßç‡¶≤‡¶ø‡¶™ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡•§ ‡¶è‡¶õ‡¶æ‡¶°‡¶º‡¶æ‡¶ì, ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡¶° ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶Ø‡¶æ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶ï‡ßá ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá‡•§'
                    },
                    'feature-system': {
                        title: '‚öôÔ∏è ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶ì ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶∂‡¶®',
                        icon: 'üåø',
                        content: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶≠‡¶æ‡¶≤‡ßã ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡•§ RTC ‡¶Æ‡¶°‡¶ø‡¶â‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ü‡¶ø Night Mode ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßá, ‡¶Ø‡¶æ ‡¶∞‡¶æ‡¶§‡ßá ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá‡¶∞ ‡¶â‡¶ú‡ßç‡¶ú‡ßç‡¶¨‡¶≤‡¶§‡¶æ ‡¶ï‡¶Æ‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶Ø‡¶º‡•§ LDR ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶ò‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã‡¶∞ ‡¶§‡ßÄ‡¶¨‡ßç‡¶∞‡¶§‡¶æ ‡¶Æ‡ßá‡¶™‡ßá Ambient Light Control ‡¶ï‡¶∞‡ßá‡•§ SD Card ‡¶Æ‡¶°‡¶ø‡¶â‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶∏‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ (‡¶∏‡¶Æ‡¶Ø‡¶º, ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ, ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü) ‡¶≤‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º, ‡¶Ø‡¶æ ‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï ‡¶™‡¶∞‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§'
                    }
                },
                workflow: {
                    'workflow-step-1': '‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡ßá ‡¶¨‡¶∏‡¶≤‡ßá IR ‡¶è‡¶¨‡¶Ç PIR ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶§‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶ì ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶®‡¶°‡¶º‡¶æ‡¶ö‡¶°‡¶º‡¶æ ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßá‡•§ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶π‡¶Ø‡¶º‡•§',
                    'workflow-step-2': '‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶á ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶è‡¶ü‡¶ø Ultrasonic, Sound ‡¶è‡¶¨‡¶Ç LDR ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßá‡¶∏‡¶≤‡¶æ‡¶á‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶â‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡•§',
                    'workflow-step-3': '‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá, RTC-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶Ø‡¶º‡•§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡¶° ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶§‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßá‡•§',
                    'workflow-step-4': '‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡ßç‡¶∞‡¶Æ‡¶æ‡¶ó‡¶§ ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶´‡¶ø‡¶â‡¶∂‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç ‡¶ï‡¶∞‡¶§‡ßá ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶π‡¶≤‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø), ‡¶è‡¶ü‡¶ø LCD, LED, Buzzer ‡¶è‡¶¨‡¶Ç Guardian App-‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶Ø‡¶º‡•§'
                },
                hardware: [
                    { id: 'arduino', name: 'Arduino UNO', feature: '‡¶ï‡ßã‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤‡¶æ‡¶∞', description: '‡¶™‡ßç‡¶∞‡¶ï‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶Æ‡¶∏‡ßç‡¶§‡¶ø‡¶∑‡ßç‡¶ï, ‡¶Ø‡¶æ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá‡•§' },
                    { id: 'rtc', name: 'DS3321 RTC', feature: '‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü', description: '‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤ ‡¶∏‡¶Æ‡¶Ø‡¶º, ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶™‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßá, ‡¶Ø‡¶æ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞, ‡¶®‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶° ‡¶è‡¶¨‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡¶ó‡¶ø‡¶Ç‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶π‡¶æ‡¶∞‡ßç‡¶Ø‡•§' },
                    { id: 'lcd', name: '16x2 I2C LCD', feature: '‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï', description: '‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ, ‡¶∏‡¶Æ‡¶Ø‡¶º, ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º‡•§' },
                    { id: 'sdcard', name: 'SD Card Module', feature: '‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡¶ó‡¶ø‡¶Ç', description: '‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶∏‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø (‡¶∏‡¶Æ‡¶Ø‡¶º, ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ, ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü) ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßá‡•§' },
                    { id: 'dfplayer', name: 'DFPlayer Mini', feature: '‡¶Ö‡¶°‡¶ø‡¶ì ‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶®', description: 'SD ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßã‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶ï‡ßç‡¶≤‡¶ø‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßá‡•§' },
                    { id: 'sensors', name: '‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø-‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞', feature: '‡¶°‡¶ø‡¶∏‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§‡¶ï‡¶∞‡¶£', description: 'IR, PIR, Ultrasonic, Sound ‡¶è‡¶¨‡¶Ç LDR ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞ ‡¶ï‡¶∞‡ßá‡•§' },
                    { id: 'bluetooth', name: 'Bluetooth App', feature: '‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç', description: '‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™, ‡¶Ø‡¶æ ‡¶¨‡ßç‡¶≤‡ßÅ‡¶ü‡ßÅ‡¶•‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶¶‡ßá‡¶Ø‡¶º‡•§' }
                ],
                chartData: {
                    labels: ['‡¶∂‡¶®‡¶ø', '‡¶∞‡¶¨‡¶ø', '‡¶∏‡ßã‡¶Æ', '‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤', '‡¶¨‡ßÅ‡¶ß', '‡¶¨‡ßÉ‡¶π‡¶É', '‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞'],
                    minutes: [120, 155, 130, 180, 160, 200, 90],
                    points: [110, 145, 125, 170, 155, 190, 85]
                }
            };

            // --- REPORT VIEW (Interactive Report) Logic ---
            const featuresNav = document.getElementById('features-nav');
            const featuresContent = document.getElementById('features-content');
            const workflowSteps = document.querySelectorAll('.workflow-step');
            const workflowDetails = document.getElementById('workflow-details');
            const hardwareGrid = document.getElementById('hardware-grid');
            const modal = document.getElementById('unified-modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContentEl = document.getElementById('modal-content');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalActionButtons = document.getElementById('modal-action-buttons');
            const modalConfirm = document.getElementById('modal-confirm');
            const modalCancel = document.getElementById('modal-cancel');


            function showModal(title, message, feature = '', onConfirm = null) {
                document.getElementById('modal-title').textContent = title;
                document.getElementById('modal-feature').textContent = feature;
                document.getElementById('modal-description').textContent = message;

                if (onConfirm) {
                    modalActionButtons.classList.remove('hidden');
                    modalConfirm.onclick = () => { onConfirm(); closeModal(); };
                    modalCancel.onclick = closeModal;
                } else {
                    modalActionButtons.classList.add('hidden');
                }
                
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modalBackdrop.classList.remove('opacity-0');
                    modalContentEl.classList.remove('scale-95');
                }, 10);
            }

            function closeModal() {
                modalBackdrop.classList.add('opacity-0');
                modalContentEl.classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    // Reset confirm handlers
                    modalConfirm.onclick = null;
                    modalCancel.onclick = null;
                }, 300);
            }

            modalCloseBtn.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', closeModal);


            function showFeatureContent(targetId) {
                const feature = ssfmaData.features[targetId];
                featuresContent.innerHTML = `
                    <div class="flex flex-col md:flex-row items-center gap-6 md:gap-8">
                        <div class="text-6xl bg-gray-100 p-6 rounded-full">${feature.icon}</div>
                        <div class="text-center md:text-left">
                            <h3 class="text-2xl font-bold text-[#344e41] mb-2">${feature.title}</h3>
                            <p class="text-gray-700 leading-relaxed">${feature.content}</p>
                        </div>
                    </div>
                `;
                document.querySelectorAll('.feature-tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.target === targetId);
                });
            }

            featuresNav.addEventListener('click', (e) => {
                if (e.target.matches('.feature-tab')) {
                    showFeatureContent(e.target.dataset.target);
                }
            });

            workflowSteps.forEach(step => {
                step.addEventListener('click', () => {
                    workflowSteps.forEach(s => s.classList.remove('active'));
                    step.classList.add('active');
                    workflowDetails.innerHTML = `<p class="text-gray-800 font-medium">${ssfmaData.workflow[step.id]}</p>`;
                });
            });

            hardwareGrid.innerHTML = ssfmaData.hardware.map(item => `
                <div data-id="${item.id}" class="hardware-card bg-white p-4 rounded-lg shadow-md text-center cursor-pointer transition transform hover:scale-105">
                    <p class="text-4xl">${{arduino:'‚öôÔ∏è', rtc:'‚è∞', lcd:'üìü', sdcard:'üíæ', dfplayer:'üîä', sensors:'üì°', bluetooth:'üì±'}[item.id]}</p>
                    <h4 class="font-bold mt-2 text-[#344e41]">${item.name}</h4>
                    <p class="text-xs text-gray-500">${item.feature}</p>
                </div>
            `).join('');
            
            hardwareGrid.addEventListener('click', (e) => {
                const card = e.target.closest('.hardware-card');
                if (card) {
                    const item = ssfmaData.hardware.find(h => h.id === card.dataset.id);
                    showModal(item.name, item.description, item.feature);
                }
            });

            showFeatureContent('feature-detection');
            
            // Chart.js implementation for Report View
            const ctx = document.getElementById('performanceChart').getContext('2d');
            const performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ssfmaData.chartData.labels,
                    datasets: [{
                        label: '‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü',
                        data: ssfmaData.chartData.minutes,
                        backgroundColor: 'rgba(52, 78, 65, 0.6)',
                        borderColor: '#344e41',
                        borderWidth: 2,
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#344e41',
                            titleFont: { size: 14, family: "'Hind Siliguri', sans-serif" },
                            bodyFont: { size: 12, family: "'Hind Siliguri', sans-serif" },
                            padding: 10,
                            cornerRadius: 5
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            ticks: { font: { size: 12, family: "'Hind Siliguri', sans-serif" } }
                        },
                        x: {
                            grid: { display: false },
                             ticks: { font: { size: 12, family: "'Hind Siliguri', sans-serif" } }
                        }
                    }
                }
            });

            document.getElementById('show-minutes').addEventListener('click', (e) => {
                performanceChart.data.datasets[0].data = ssfmaData.chartData.minutes;
                performanceChart.data.datasets[0].label = '‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü';
                performanceChart.update();
                e.target.classList.add('bg-[#588157]', 'text-white');
                document.getElementById('show-points').classList.remove('bg-[#588157]', 'text-white');
                document.getElementById('show-points').classList.add('bg-white', 'text-gray-700');
            });

            document.getElementById('show-points').addEventListener('click', (e) => {
                performanceChart.data.datasets[0].data = ssfmaData.chartData.points;
                performanceChart.data.datasets[0].label = '‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü';
                performanceChart.update();
                 e.target.classList.add('bg-[#588157]', 'text-white');
                document.getElementById('show-minutes').classList.remove('bg-[#588157]', 'text-white');
                document.getElementById('show-minutes').classList.add('bg-white', 'text-gray-700');
            });
            
            // --- GUARDIAN APP VIEW (Simulated Bluetooth) Logic ---
            const STATUS_ICONS = {
                STUDYING: { iconClass: 'fa-solid fa-lightbulb', color: 'text-green-400', label: 'Focused Studying' },
                DISTRACTED: { iconClass: 'fa-solid fa-triangle-exclamation', color: 'text-red-400', label: 'Distracted! Refocus' },
                IDLE: { iconClass: 'fa-solid fa-mug-hot', color: 'text-yellow-400', label: 'Idle / Break Time' },
                OBSERVING: { iconClass: 'fa-solid fa-magnifying-glass', color: 'text-blue-400', label: 'System Observing' },
                STOPPED: { iconClass: 'fa-solid fa-stop-circle', color: 'text-gray-500', label: 'Stopped / Ready' },
                DEFAULT: { iconClass: 'fa-solid fa-plug-circle-xmark', color: 'text-gray-600', label: 'Disconnected' }
            };
            const DAILY_GOAL_MINUTES = 60;
            let appStatusData = { state: 'DEFAULT', minutesToday: 0, points: 0, silentMode: false };
            let isConnected = false;
            let logCount = 0;
            let intervalId = null; 

            const btStatusLight = document.getElementById('bt-status-light');
            const btStatusText = document.getElementById('bt-status-text');
            const appConnectBtn = document.getElementById('app-connect-btn');
            const appCurrentIcon = document.getElementById('app-current-icon');
            const appCurrentLabel = document.getElementById('app-current-label');
            const appProgressText = document.getElementById('app-progress-text');
            const appProgressBar = document.getElementById('app-progress-bar');
            const appGoalAchieved = document.getElementById('app-goal-achieved');
            const appStudyTime = document.getElementById('app-study-time');
            const appFocusPoints = document.getElementById('app-focus-points');
            const appDebugLog = document.getElementById('app-debug-log');
            const appSilentBtn = document.getElementById('app-silent-btn');
            const appSilentIcon = document.getElementById('app-silent-icon');
            const appSilentLabel = document.getElementById('app-silent-label');

            const formatMinutes = (totalMinutes) => {
                const hours = Math.floor(totalMinutes / 60);
                const minutes = totalMinutes % 60;
                return `${hours}h ${minutes}m`;
            };

            const updateAppUI = () => {
                const current = STATUS_ICONS[appStatusData.state] || STATUS_ICONS.DEFAULT;
                appCurrentIcon.className = `${current.iconClass} text-4xl w-12 h-12 flex items-center justify-center`;
                appCurrentIcon.classList.add(current.color);
                appCurrentLabel.textContent = current.label;
                appCurrentLabel.classList.remove('text-green-400', 'text-red-400', 'text-yellow-400', 'text-blue-400', 'text-gray-500', 'text-gray-600');
                appCurrentLabel.classList.add(current.color);

                appStudyTime.textContent = formatMinutes(appStatusData.minutesToday);
                appFocusPoints.textContent = appStatusData.points;
                
                const progressPercentage = Math.min(100, (appStatusData.minutesToday / DAILY_GOAL_MINUTES) * 100);
                appProgressText.textContent = `${Math.round(progressPercentage)}% ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® (${formatMinutes(appStatusData.minutesToday)} / ${DAILY_GOAL_MINUTES}m)`;
                appProgressBar.style.width = `${progressPercentage}%`;
                appProgressBar.classList.toggle('bg-green-500', progressPercentage >= 100);
                appProgressBar.classList.toggle('bg-pink-500', progressPercentage < 100);
                appGoalAchieved.classList.toggle('hidden', progressPercentage < 100);
                
                appSilentIcon.className = `mb-1 text-3xl ${appStatusData.silentMode ? 'fa-solid fa-volume-high' : 'fa-solid fa-volume-off'}`;
                appSilentLabel.textContent = appStatusData.silentMode ? '‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶∏‡¶æ‡¶á‡¶≤‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßã‡¶°';
                appSilentBtn.classList.toggle('bg-indigo-600', appStatusData.silentMode);
                appSilentBtn.classList.toggle('hover:bg-indigo-700', appStatusData.silentMode);
                appSilentBtn.classList.toggle('bg-gray-600', !appStatusData.silentMode);
                appSilentBtn.classList.toggle('hover:bg-gray-700', !appStatusData.silentMode);

                document.querySelectorAll('#app-view button[data-cmd]').forEach(btn => {
                    btn.disabled = !isConnected;
                });
            };

            const updateLog = (message) => {
                const now = new Date().toLocaleTimeString('bn-BD');
                appDebugLog.textContent = `[${now}] ${message}\n${appDebugLog.textContent}`;
            };

            const simulateStatusUpdate = () => {
                if (!isConnected) return;
                
                if (appStatusData.state === 'STOPPED' || appStatusData.state === 'IDLE') {
                    // Start study simulation after 10s idle/stop
                    if (logCount % 10 === 0) {
                         appStatusData.state = 'STUDYING';
                         updateLog("SYSTEM: Status changed to STUDYING.");
                    }
                }
                
                if (appStatusData.state === 'STUDYING') {
                    appStatusData.minutesToday += 1;
                    appStatusData.points += 5;
                    updateLog(`STATUS|state=${appStatusData.state}|minutesToday=${appStatusData.minutesToday}|points=${appStatusData.points}|silentMode=${appStatusData.silentMode ? '1' : '0'}`);
                    
                    // Simulate a distraction every 15 minutes
                    if (appStatusData.minutesToday % 15 === 0 && appStatusData.minutesToday > 0) {
                        appStatusData.state = 'DISTRACTED';
                        updateLog("ALERT: Distraction detected! State changed to DISTRACTED.");
                        setTimeout(() => {
                            appStatusData.state = 'STUDYING'; // Revert back to studying
                            updateLog("SYSTEM: Student refocused. State changed back to STUDYING.");
                        }, 5000);
                    }
                }
                
                updateAppUI();
                logCount++;
            };

            appConnectBtn.addEventListener('click', () => {
                if (isConnected) return;

                appConnectBtn.textContent = '‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
                btStatusText.textContent = 'Connecting...';
                btStatusLight.classList.remove('bg-red-500');
                btStatusLight.classList.add('bg-yellow-500');

                // Simulate Bluetooth connection delay
                setTimeout(() => {
                    isConnected = true;
                    appStatusData = { state: 'OBSERVING', minutesToday: 0, points: 0, silentMode: false };
                    
                    btStatusText.textContent = 'Connected';
                    btStatusLight.classList.remove('bg-yellow-500');
                    btStatusLight.classList.add('bg-green-500', 'animate-pulse');
                    appConnectBtn.textContent = 'Arduino-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó';
                    
                    updateLog("SUCCESS: Arduino-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ö‡¶¨‡¶ú‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶Ç ‡¶Æ‡ßã‡¶°‡ßá ‡¶Ü‡¶õ‡ßá‡•§");
                    
                    // Start simulation loop
                    intervalId = setInterval(simulateStatusUpdate, 5000); // Update every 5 seconds (simulated minute)
                    updateAppUI();

                }, 2000);
            });

            document.querySelectorAll('#app-view button[data-cmd]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const cmd = e.currentTarget.dataset.cmd;
                    if (!isConnected) {
                        showModal("‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶® (Disconnected)", "‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶ó‡ßá SSFA Arduino-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                        return;
                    }

                    if (cmd === 'reset') {
                         showModal("‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® (Confirm Reset)", 
                                    "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶°‡¶ø ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ü‡¶ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßÄ‡¶Ø‡¶º‡•§",
                                    "", // feature is empty
                                    () => {
                                        appStatusData.minutesToday = 0;
                                        appStatusData.points = 0;
                                        updateLog("COMMAND: Data reset executed.");
                                        updateAppUI();
                                    });
                        return;
                    }
                    
                    if (cmd === 'silent') {
                        appStatusData.silentMode = !appStatusData.silentMode;
                        updateLog(`COMMAND: Silent mode set to ${appStatusData.silentMode}.`);
                    } else if (cmd === 'motivation') {
                        updateLog("COMMAND: Motivational prompt sent to Arduino LCD/Speaker.");
                    } else if (cmd === 'status') {
                        updateLog("COMMAND: Status request sent. Waiting for update...");
                        // Will trigger an update immediately
                    }
                    
                    updateAppUI();
                });
            });


            // --- Unified Tab Logic ---
            const tabReport = document.getElementById('tab-report');
            const tabApp = document.getElementById('tab-app');
            const reportView = document.getElementById('report-view');
            const appView = document.getElementById('app-view');

            const switchView = (viewId) => {
                if (viewId === 'report-view') {
                    reportView.classList.remove('hidden');
                    appView.classList.add('hidden');
                    tabReport.classList.add('bg-[#588157]', 'text-white');
                    tabReport.classList.remove('bg-white', 'text-[#344e41]');
                    tabApp.classList.remove('bg-[#588157]', 'text-white');
                    tabApp.classList.add('bg-white', 'text-[#344e41]');
                    document.getElementById('report-nav').style.display = 'flex'; // Show report sub-nav
                } else {
                    appView.classList.remove('hidden');
                    reportView.classList.add('hidden');
                    tabApp.classList.add('bg-[#588157]', 'text-white');
                    tabApp.classList.remove('bg-white', 'text-[#344e41]');
                    tabReport.classList.remove('bg-[#588157]', 'text-white');
                    tabReport.classList.add('bg-white', 'text-[#344e41]');
                    document.getElementById('report-nav').style.display = 'none'; // Hide report sub-nav
                    // Ensure App UI is initialized/updated when switching to it
                    updateAppUI(); 
                }
            };
            
            tabReport.addEventListener('click', () => switchView('report-view'));
            tabApp.addEventListener('click', () => switchView('app-view'));
            
            // Initial view setup
            switchView('report-view');
        });
    </script>
</body>
</html>

