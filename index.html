<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Study Focus Assistant - SSFMA</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for graph rendering -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Lucide icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Charm:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
        }

        .footer-dev-text {
            font-family: 'Charm', cursive;
            font-style: italic;
            font-size: 1.1rem;
            color: #495057;
        }

        /* আপডেট করা নিয়ন গ্লো এফেক্ট: আরও শক্তিশালী */
        .neon-border {
            box-shadow: 0 0 10px #3CB371, 0 0 20px #3CB371, 0 0 30px #3CB371; /* Medium Sea Green */
            border: 3px solid #3CB371;
            transition: all 0.3s ease-in-out;
        }
        .neon-border:hover {
            box-shadow: 0 0 15px #00CED1, 0 0 25px #00CED1, 0 0 40px #00CED1; /* Dark Cyan on hover */
        }

        /* কন্টেন্ট স্লাইডার/মারকিউ */
        .marquee-container {
            overflow: hidden;
            height: 120px; 
            background-color: #e9ecef;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
        }

        .marquee-content {
            display: flex;
            width: fit-content;
            animation: marquee 30s linear infinite; 
            padding-right: 50vw;
            gap: 4rem;
        }

        .marquee-item {
            flex-shrink: 0;
            width: 300px;
            background-color: white;
            padding: 0.75rem;
            border-radius: 0.5rem;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* কাস্টম টাইটেল ডিজাইন - আরও সুস্পষ্ট */
        .styled-heading {
            border-bottom: 3px solid #008080; 
            padding-bottom: 0.5rem;
            font-weight: 800;
            font-size: 2.25rem; /* Larger font */
            color: #1A3E5F; /* Deeper Blue */
            display: inline-block;
            margin-bottom: 1rem;
        }

        /* বাটন অ্যাক্টিভ স্টাইল */
        .analysis-btn.active-focus {
            background-color: #008080 !important; 
            color: white !important;
            box-shadow: 0 4px 6px -1px rgba(0, 128, 128, 0.4);
        }
        .analysis-btn.active-distraction {
            background-color: #DC2626 !important; /* Red */
            color: white !important;
            box-shadow: 0 4px 6px -1px rgba(220, 38, 38, 0.4);
        }
    </style>
    <!-- Favicon - হালকা সবুজ SVG -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0OCIgZmlsbD0iIzhmYmM4ZiIgc3Ryb2tlPSIjNTc1ZTYwIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2ZyUzRQ==">
</head>

<body class="min-h-screen flex flex-col">

    <!-- Header / Navigation Bar -->
    <header class="bg-white shadow-lg sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo Area -->
            <div class="flex items-center space-x-3">
                <img src="https://placehold.co/60x60/1A3E5F/FFFFFF?text=SSFMA" alt="SSFMA Logo" class="h-10 w-10 rounded-full">
                <span class="text-3xl font-extrabold text-[#1A3E5F] tracking-tight">SSFMA</span>
                <span class="text-xl font-medium text-[#008080] hidden sm:block">Assistant</span>
            </div>

            <!-- Navigation Links -->
            <nav class="space-x-8 hidden md:flex">
                <a href="#dashboard" class="text-gray-600 hover:text-[#1A3E5F] font-medium transition duration-300 flex items-center"><i data-lucide="layout-dashboard" class="w-5 h-5 mr-1"></i>ড্যাশবোর্ড</a>
                <a href="#reports" class="text-gray-600 hover:text-[#1A3E5F] font-medium transition duration-300 flex items-center"><i data-lucide="bar-chart-3" class="w-5 h-5 mr-1"></i>বিশ্লেষণ</a>
                <a href="#guardian" class="text-gray-600 hover:text-[#1A3E5F] font-medium transition duration-300 flex items-center"><i data-lucide="shield-check" class="w-5 h-5 mr-1"></i>গার্ডিয়ান</a>
            </nav>

            <!-- Action Button -->
            <button class="bg-[#008080] text-white px-5 py-2 rounded-xl hover:bg-[#006666] transition duration-300 shadow-xl font-bold">লগইন</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="mb-16">
            <h2 class="styled-heading mb-8">ড্যাশবোর্ড: স্মার্ট ফোকাস</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <!-- Focus Timer Card -->
                <div class="bg-white p-6 rounded-xl shadow-2xl border-t-8 border-[#1A3E5F] text-center">
                    <i data-lucide="timer" class="w-12 h-12 mx-auto text-[#1A3E5F] mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">চলমান সেশন</p>
                    <p id="focus-timer" class="text-6xl font-extrabold text-[#008080]">25:00</p>
                    <button id="start-focus" class="mt-4 w-full bg-[#008080] text-white px-4 py-3 rounded-xl hover:bg-[#006666] transition duration-300 font-bold shadow-md">ফোকাস শুরু করুন</button>
                </div>
                
                <!-- Distraction Score Card -->
                <div class="bg-white p-6 rounded-xl shadow-2xl border-t-8 border-red-600 text-center">
                    <i data-lucide="bell-off" class="w-12 h-12 mx-auto text-red-600 mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">আজকের ডিস্ট্র্যাকশন</p>
                    <p id="distraction-count" class="text-6xl font-extrabold text-red-600">4 বার</p>
                    <p class="text-xs text-gray-500 mt-2">কমিয়ে আনার লক্ষ্য: 2</p>
                </div>
                
                <!-- Weekly Progress Card -->
                <div class="bg-white p-6 rounded-xl shadow-2xl border-t-8 border-green-600">
                    <i data-lucide="trending-up" class="w-12 h-12 text-green-600 mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">সাপ্তাহিক অগ্রগতি</p>
                    <p class="text-5xl font-extrabold text-green-600">৯২%</p>
                    <p class="text-sm text-gray-600 mt-2">আপনার ফোকাস রেট বাড়ছে!</p>
                    <button class="mt-3 w-full bg-green-600 text-white px-4 py-2 rounded-xl text-md hover:bg-green-700 transition font-semibold">সম্পূর্ণ রিপোর্ট দেখুন</button>
                </div>
            </div>
        </section>

        <!-- Performance Analysis Section -->
        <section id="reports" class="mb-16">
            <h2 class="styled-heading mb-8">পারফরম্যান্স বিশ্লেষণ</h2>
            <div class="bg-white p-6 rounded-xl shadow-2xl">
                
                <!-- Button Group for Analysis View -->
                <div class="flex space-x-4 mb-6">
                    <!-- বাটনগুলির ক্লাস পরিবর্তন করে কালার সুইচ ফিক্স করা হলো -->
                    <button id="view-focus" class="analysis-btn active-focus px-6 py-2 rounded-full font-bold transition duration-300">ফোকাস সময়</button>
                    <button id="view-distraction" class="analysis-btn bg-gray-200 text-gray-700 hover:bg-red-100 hover:text-red-600 px-6 py-2 rounded-full font-bold transition duration-300">ডিস্ট্র্যাকশন প্যাটার্ন</button>
                </div>

                <!-- Chart Container -->
                <div class="relative h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Guardian App Section with Bluetooth Connect Option -->
        <section id="guardian" class="mb-16">
            <h2 class="styled-heading mb-8">অভিভাবক মনিটরিং ও হার্ডওয়্যার সংযোগ</h2>
            <div class="bg-white p-8 rounded-xl shadow-2xl border-l-8 border-[#1A3E5F]">
                <p class="text-lg mb-4 font-semibold text-[#1A3E5F]">আপনার হার্ডওয়্যার অ্যাসিস্ট্যান্ট ডিভাইসটি সংযুক্ত করুন:</p>
                
                <!-- Bluetooth Connect Button -->
                <button id="connect-bluetooth" class="bg-indigo-700 text-white px-8 py-4 rounded-xl hover:bg-indigo-800 transition duration-300 font-bold shadow-xl flex items-center text-lg">
                    <i data-lucide="bluetooth" class="w-6 h-6 mr-3"></i>
                    ব্লুটুথ ডিভাইস খুঁজুন ও কানেক্ট করুন
                </button>
                <p id="bluetooth-status" class="mt-3 text-sm font-medium text-gray-500">বর্তমান অবস্থা: সংযোগ বিচ্ছিন্ন</p>

                <!-- গুরুত্বপূর্ণ বার্তা -->
                <div id="bluetooth-warning" class="mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-lg">
                    <p class="font-semibold flex items-center"><i data-lucide="info" class="w-4 h-4 mr-2"></i>গুরুত্বপূর্ণ বার্তা:</p>
                    <p class="text-sm mt-1">এই অনলাইন প্রিভিউ-তে ব্লুটুথ সংযোগ কাজ করবে না। ফিচারটি পরীক্ষা করতে আপনাকে অবশ্যই কোডটি একটি আধুনিক ব্রাউজারে (Chrome/Edge) **HTTPS প্রোটোকলের মাধ্যমে** আপনার হার্ডওয়্যারের সাথে রান করতে হবে। ক্লিক করলে শুধু ব্রাউজার প্রম্পট দেখাবে।</p>
                </div>
                
                <div class="mt-8 pt-4 border-t border-gray-200">
                    <h3 class="text-xl font-semibold text-[#1A3E5F] mb-3">অভিভাবক পোর্টাল</h3>
                    <p class="text-gray-600">অভিভাবক পোর্টালের মাধ্যমে আপনার সন্তানের পড়াশোনার অগ্রগতি এবং ফোকাস প্যাটার্ন ট্র্যাক করুন।</p>
                    <button class="mt-4 bg-[#008080] text-white px-5 py-2 rounded-xl hover:bg-[#006666] transition duration-300 text-md font-semibold shadow-md">গার্ডিয়ান পোর্টালে প্রবেশ করুন</button>
                </div>
            </div>
        </section>

        <!-- Info Silder Section (Marquee) -->
        <section class="mb-16">
            <h2 class="styled-heading mb-8">আমাদের অর্জন ও তথ্য</h2>
            <div class="marquee-container shadow-xl">
                <div class="marquee-content">
                    
                    <!-- Marquee Item 1 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-xl bg-white shadow-md">
                        <img src="https://placehold.co/80x80/28a745/ffffff?text=Arduino" alt="Project Info 1" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#1A3E5F]">ডিভাইস ইন্টিগ্রেশন</p>
                            <p class="text-sm text-gray-600">আরডুইনো বোর্ডের মাধ্যমে ডিসট্র্যাকশন ডিটেকশন।</p>
                        </div>
                    </div>
                    
                    <!-- Marquee Item 2 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-xl bg-white shadow-md">
                        <img src="https://placehold.co/80x80/007bff/ffffff?text=Reports" alt="Project Info 2" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#1A3E5F]">স্মার্ট রিপোর্টস</p>
                            <p class="text-sm text-gray-600">ফোকাস ও ডিস্ট্র্যাকশন প্যাটার্নের বিস্তারিত গ্রাফ।</p>
                        </div>
                    </div>

                    <!-- Marquee Item 3 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-xl bg-white shadow-md">
                        <img src="https://placehold.co/80x80/ffc107/343a40?text=Goal" alt="Project Info 3" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#1A3E5F]">মোটিভেশন সিস্টেম</p>
                            <p class="text-sm text-gray-600">লক্ষ্য পূরণে সময়মতো অনুপ্রেরণামূলক বার্তা।</p>
                        </div>
                    </div>
                    
                    <!-- Repeat content to enable seamless loop -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-xl bg-white shadow-md">
                        <img src="https://placehold.co/80x80/28a745/ffffff?text=Arduino" alt="Project Info 1" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#1A3E5F]">ডিভাইস ইন্টিগ্রেশন</p>
                            <p class="text-sm text-gray-600">আরডুইনো বোর্ডের মাধ্যমে ডিসট্র্যাকশন ডিটেকশন।</p>
                        </div>
                    </div>
                    <div class="marquee-item flex items-center neon-border p-3 rounded-xl bg-white shadow-md">
                        <img src="https://placehold.co/80x80/007bff/ffffff?text=Reports" alt="Project Info 2" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#1A3E5F]">স্মার্ট রিপোর্টস</p>
                            <p class="text-sm text-gray-600">ফোকাস ও ডিস্ট্র্যাকশন প্যাটার্নের বিস্তারিত গ্রাফ।</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-[#1A3E5F] text-white py-6 mt-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <!-- Developed By Line (Italic Font) -->
            <p class="footer-dev-text text-sm mb-2 text-gray-300">Developed by - Azmain Muttaqi Nishan</p>
            
            <!-- Project Slogan Line -->
            <p class="text-xs text-gray-400">Smart Study Focus Assistant | Turn Focus Into Success | সর্বস্বত্ব সংরক্ষিত © ২০২৫।</p>
        </div>
    </footer>

    <!-- JavaScript for Chart and Bluetooth Logic -->
    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // --- Performance Chart Logic ---
        const ctx = document.getElementById('performanceChart').getContext('2d');
        
        // Data for Focus Time (Soft Green Color - #3CB371)
        const focusData = {
            labels: ['রবি', 'সোম', 'মঙ্গল', 'বুধ', 'বৃহস্পতি', 'শুক্র', 'শনি'],
            datasets: [{
                label: 'প্রতিদিনের ফোকাস (মিনিট)',
                data: [120, 150, 90, 180, 140, 210, 100],
                borderColor: '#3CB371', // Soft Green
                backgroundColor: 'rgba(60, 179, 113, 0.2)', // Light Green Fill
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#3CB371'
            }]
        };

        // Data for Distraction Pattern (Red Color - #DC2626)
        const distractionData = {
            labels: ['রবি', 'সোম', 'মঙ্গল', 'বুধ', 'বৃহস্পতি', 'শুক্র', 'শনি'],
            datasets: [{
                label: 'প্রতিদিনের ডিস্ট্র্যাকশন (বার)',
                data: [5, 3, 7, 2, 4, 1, 6],
                borderColor: '#DC2626', // Tailwind Red-600
                backgroundColor: 'rgba(220, 38, 38, 0.2)', // Light Red Fill
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#DC2626'
            }]
        };

        const config = {
            type: 'line',
            data: focusData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    }
                }
            }
        };

        const performanceChart = new Chart(ctx, config);

        // Function to update chart data and button state
        function updateChart(dataType) {
            const focusBtn = document.getElementById('view-focus');
            const distractionBtn = document.getElementById('view-distraction');

            // Reset all buttons to inactive state
            focusBtn.classList.remove('active-focus');
            distractionBtn.classList.remove('active-distraction');
            
            // Add inactive classes (default gray background)
            focusBtn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-[#008080]/10', 'hover:text-[#008080]');
            distractionBtn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-red-100', 'hover:text-red-600');


            if (dataType === 'focus') {
                performanceChart.data = focusData;
                
                // Set Focus button active
                focusBtn.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-[#008080]/10', 'hover:text-[#008080]');
                focusBtn.classList.add('active-focus');

            } else { // 'distraction'
                performanceChart.data = distractionData;

                // Set Distraction button active
                distractionBtn.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-red-100', 'hover:text-red-600');
                distractionBtn.classList.add('active-distraction');
            }
            
            performanceChart.update();
        }

        // Event listeners for buttons
        document.getElementById('view-focus').addEventListener('click', () => updateChart('focus'));
        document.getElementById('view-distraction').addEventListener('click', () => updateChart('distraction'));
        
        // Ensure initial state is correct (Focus is active by default)
        updateChart('focus');

        // --- Bluetooth Connection Logic for Guardian App ---
        const connectButton = document.getElementById('connect-bluetooth');
        const bluetoothStatus = document.getElementById('bluetooth-status');
        
        // Function to handle Bluetooth connection attempt
        connectButton.addEventListener('click', async () => {
            if (!navigator.bluetooth) {
                // If Web Bluetooth is NOT supported (like in a non-secure environment or unsupported browser)
                bluetoothStatus.textContent = "বর্তমান অবস্থা: আপনার ব্রাউজারে ব্লুটুথ API সাপোর্ট করে না।";
                bluetoothStatus.classList.remove('text-green-500', 'text-yellow-600');
                bluetoothStatus.classList.add('text-red-500');
                return;
            }

            bluetoothStatus.textContent = "বর্তমান অবস্থা: ডিভাইসের জন্য সার্চ করা হচ্ছে (ব্রাউজার প্রম্পট আশা করুন)...";
            bluetoothStatus.classList.remove('text-green-500', 'text-red-500');
            bluetoothStatus.classList.add('text-yellow-600');

            try {
                // This line will trigger the native browser security prompt for device selection
                const device = await navigator.bluetooth.requestDevice({
                    // For a real Arduino project, you'd specify the device name or services here.
                    filters: [{ namePrefix: 'SSFMA' }], 
                    optionalServices: ['0000ffe0-0000-1000-8000-00805f9b34fb'] 
                });

                bluetoothStatus.textContent = `বর্তমান অবস্থা: "${device.name}" এর সাথে সংযোগ স্থাপনের চেষ্টা চলছে...`;

                // If the user selects a device, proceed to connect (which will fail in this sandbox environment)
                const server = await device.gatt.connect();
                
                bluetoothStatus.textContent = `বর্তমান অবস্থা: "${device.name}" এর সাথে সফলভাবে সংযুক্ত! (প্রকৃত সংযোগের জন্য আপনার হার্ডওয়্যার চালু করুন)`;
                bluetoothStatus.classList.remove('text-yellow-600', 'text-red-500');
                bluetoothStatus.classList.add('text-green-500');
                
                device.addEventListener('gattserverdisconnected', () => {
                    bluetoothStatus.textContent = "বর্তমান অবস্থা: সংযোগ বিচ্ছিন্ন হয়েছে।";
                    bluetoothStatus.classList.remove('text-green-500');
                    bluetoothStatus.classList.add('text-red-500');
                });

            } catch (error) {
                // This usually catches user cancellation or connection failure in a sandbox environment
                console.error('Bluetooth Connection Error:', error);
                if (error.name === 'NotFoundError') {
                    bluetoothStatus.textContent = "বর্তমান অবস্থা: কোনো ডিভাইস খুঁজে পাওয়া যায়নি বা আপনি বাতিল করেছেন।";
                } else {
                    bluetoothStatus.textContent = "বর্তমান অবস্থা: সংযোগ ব্যর্থ। ডিভাইসের পাওয়ার বা সেটিংস চেক করুন। (নিরাপত্তা ত্রুটি)";
                }
                bluetoothStatus.classList.remove('text-yellow-600', 'text-green-500');
                bluetoothStatus.classList.add('text-red-500');
            }
        });

        // --- Simple Focus Timer (Placeholder) ---
        let isFocusing = false;
        let timeInSeconds = 25 * 60;
        let timerInterval;

        function updateTimerDisplay() {
            const minutes = String(Math.floor(timeInSeconds / 60)).padStart(2, '0');
            const seconds = String(timeInSeconds % 60).padStart(2, '0');
            document.getElementById('focus-timer').textContent = `${minutes}:${seconds}`;
        }

        document.getElementById('start-focus').addEventListener('click', () => {
            const startBtn = document.getElementById('start-focus');
            const timerDisplay = document.getElementById('focus-timer');

            if (isFocusing) {
                clearInterval(timerInterval);
                isFocusing = false;
                startBtn.textContent = 'ফোকাস শুরু করুন';
                startBtn.classList.remove('bg-red-600', 'hover:bg-red-700');
                startBtn.classList.add('bg-[#008080]', 'hover:bg-[#006666]');
                timerDisplay.classList.remove('text-red-500');
                timerDisplay.classList.add('text-[#008080]');
            } else {
                isFocusing = true;
                startBtn.textContent = 'সেশন বন্ধ করুন';
                startBtn.classList.remove('bg-[#008080]', 'hover:bg-[#006666]');
                startBtn.classList.add('bg-red-600', 'hover:bg-red-700');
                timerDisplay.classList.remove('text-[#008080]');
                timerDisplay.classList.add('text-red-500');
                timeInSeconds = 25 * 60; 
                updateTimerDisplay();

                timerInterval = setInterval(() => {
                    timeInSeconds--;
                    updateTimerDisplay();
                    if (timeInSeconds <= 0) {
                        clearInterval(timerInterval);
                        isFocusing = false;
                        startBtn.textContent = 'ফোকাস সেশন সমাপ্ত';
                        startBtn.classList.remove('bg-red-600', 'hover:bg-red-700');
                        startBtn.classList.add('bg-green-600', 'hover:bg-green-700');
                        timerDisplay.textContent = '00:00';
                        timerDisplay.classList.remove('text-red-500');
                        timerDisplay.classList.add('text-green-600');
                    }
                }, 1000);
            }
        });
    </script>
</body>
</html>

