<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Study Focus Assistant - SSFMA</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for graph rendering -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Lucide icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Charm:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        /* ফন্টের জন্য ইন্টার ব্যবহার */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* হালকা ধূসর ব্যাকগ্রাউন্ড */
            color: #343a40;
        }

        /* ফুটারের জন্য ইটালিয়ান ফন্ট (Charm/Inter Italic) */
        .footer-dev-text {
            font-family: 'Charm', cursive; /* একটি ইটালিয়ান/হ্যান্ডরাইটিং-এর মতো ফন্ট */
            font-style: italic;
            font-size: 1.1rem;
            color: #495057;
        }

        /* নিয়ন গ্লো এফেক্ট সহ বর্ডার */
        .neon-border {
            box-shadow: 0 0 5px #8FBC8F, 0 0 10px #8FBC8F, 0 0 15px #8FBC8F;
            border: 2px solid #8FBC8F;
            transition: all 0.3s ease-in-out;
        }
        .neon-border:hover {
            box-shadow: 0 0 10px #5F9EA0, 0 0 20px #5F9EA0, 0 0 30px #5F9EA0;
        }

        /* কন্টেন্ট স্লাইডার/মারকিউ */
        .marquee-container {
            overflow: hidden;
            height: 120px; 
            background-color: #e9ecef;
            border-radius: 0.5rem;
            display: flex; /* Flex ব্যবহার করে স্লাইড নিশ্চিত করা */
            align-items: center;
        }

        .marquee-content {
            display: flex;
            width: fit-content;
            animation: marquee 30s linear infinite; 
            padding-right: 50vw; 
            gap: 4rem; /* আইটেমগুলির মধ্যে ব্যবধান */
        }

        .marquee-item {
            flex-shrink: 0;
            width: 300px;
            text-align: center;
        }

        /* Continuous scrolling effect */
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* কাস্টম টাইটেল ডিজাইন */
        .styled-heading {
            border-left: 5px solid #008080; /* Teal color */
            padding-left: 1rem;
            font-weight: 700;
            font-size: 2rem;
            color: #002D62; /* Dark blue */
        }
    </style>
    <!-- Favicon - হালকা সবুজ SVG -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0OCIgZmlsbD0iIzhmYmM4ZiIgc3Ryb2tlPSIjNTc1ZTYwIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2ZyUzRQ==">
</head>

<body class="min-h-screen flex flex-col">

    <!-- Header / Navigation Bar -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <!-- Logo Area -->
            <div class="flex items-center space-x-3">
                <!-- লোগো: মাথার প্রোফাইল, সার্কিট ব্রেইন, গ্র্যাজুয়েশন ক্যাপ - আপলোড করা ছবিটি ব্যবহার করা হয়েছে -->
                <img src="https://placehold.co/60x60/002D62/FFFFFF?text=SSFMA+Logo" alt="SSFMA Logo" class="h-10 w-10 rounded-full">
                <span class="text-3xl font-extrabold text-[#002D62] tracking-tight">SSFMA</span>
                <span class="text-xl font-medium text-[#008080] hidden sm:block">Assistant</span>
            </div>

            <!-- Navigation Links -->
            <nav class="space-x-8 hidden md:flex">
                <a href="#dashboard" class="text-gray-600 hover:text-[#002D62] font-medium transition duration-300 flex items-center"><i data-lucide="layout-dashboard" class="w-5 h-5 mr-1"></i>ড্যাশবোর্ড</a>
                <a href="#reports" class="text-gray-600 hover:text-[#002D62] font-medium transition duration-300 flex items-center"><i data-lucide="bar-chart-3" class="w-5 h-5 mr-1"></i>বিশ্লেষণ</a>
                <a href="#guardian" class="text-gray-600 hover:text-[#002D62] font-medium transition duration-300 flex items-center"><i data-lucide="shield-check" class="w-5 h-5 mr-1"></i>গার্ডিয়ান</a>
            </nav>

            <!-- Action Button -->
            <button class="bg-[#008080] text-white px-4 py-2 rounded-lg hover:bg-[#006666] transition duration-300 shadow-lg">লগইন</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="mb-16">
            <h2 class="styled-heading mb-8">ড্যাশবোর্ড: স্মার্ট ফোকাস</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <!-- Focus Timer Card -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-[#002D62] text-center">
                    <i data-lucide="timer" class="w-10 h-10 mx-auto text-[#002D62] mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">চলমান সেশন</p>
                    <p id="focus-timer" class="text-5xl font-extrabold text-[#008080]">25:00</p>
                    <button id="start-focus" class="mt-4 w-full bg-[#008080] text-white px-4 py-2 rounded-lg hover:bg-[#006666] transition duration-300 font-semibold">ফোকাস শুরু করুন</button>
                </div>
                
                <!-- Distraction Score Card -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-red-500 text-center">
                    <i data-lucide="bell-off" class="w-10 h-10 mx-auto text-red-500 mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">আজকের ডিস্ট্র্যাকশন</p>
                    <p id="distraction-count" class="text-5xl font-extrabold text-red-500">4 বার</p>
                    <p class="text-xs text-gray-500 mt-2">কমিয়ে আনার লক্ষ্য: 2</p>
                </div>
                
                <!-- Weekly Progress Card -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-green-500">
                    <i data-lucide="trending-up" class="w-10 h-10 text-green-500 mb-3"></i>
                    <p class="text-sm font-medium text-gray-500">সাপ্তাহিক অগ্রগতি</p>
                    <p class="text-4xl font-extrabold text-green-500">৯২%</p>
                    <p class="text-sm text-gray-600 mt-2">আপনার ফোকাস রেট বাড়ছে!</p>
                    <button class="mt-3 w-full bg-green-500 text-white px-3 py-1 rounded-full text-sm hover:bg-green-600 transition">সম্পূর্ণ রিপোর্ট দেখুন</button>
                </div>
            </div>
        </section>

        <!-- Performance Analysis Section -->
        <section id="reports" class="mb-16">
            <h2 class="styled-heading mb-8">পারফরম্যান্স বিশ্লেষণ</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                
                <!-- Button Group for Analysis View -->
                <div class="flex space-x-4 mb-6">
                    <button id="view-focus" class="analysis-btn bg-[#008080] text-white px-4 py-2 rounded-full font-semibold transition duration-300">ফোকাস সময়</button>
                    <button id="view-distraction" class="analysis-btn bg-gray-200 text-gray-700 hover:bg-red-100 hover:text-red-600 px-4 py-2 rounded-full font-semibold transition duration-300">ডিস্ট্র্যাকশন প্যাটার্ন</button>
                </div>

                <!-- Chart Container -->
                <div class="relative h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Guardian App Section with Bluetooth Connect Option -->
        <section id="guardian" class="mb-16">
            <h2 class="styled-heading mb-8">অভিভাবক মনিটরিং ও হার্ডওয়্যার সংযোগ</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-[#002D62]">
                <p class="text-lg mb-4 text-gray-700">আপনার হার্ডওয়্যার অ্যাসিস্ট্যান্ট ডিভাইসটি সংযুক্ত করুন:</p>
                
                <!-- Bluetooth Connect Button -->
                <button id="connect-bluetooth" class="bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition duration-300 font-bold shadow-lg flex items-center">
                    <i data-lucide="bluetooth" class="w-6 h-6 mr-2"></i>
                    ব্লুটুথ ডিভাইস খুঁজুন ও কানেক্ট করুন
                </button>
                <p id="bluetooth-status" class="mt-3 text-sm text-gray-500">বর্তমান অবস্থা: সংযোগ বিচ্ছিন্ন</p>
                
                <div class="mt-8 pt-4 border-t border-gray-200">
                    <h3 class="text-xl font-semibold text-[#002D62] mb-3">অভিভাবক পোর্টাল</h3>
                    <p class="text-gray-600">অভিভাবক পোর্টালের মাধ্যমে আপনার সন্তানের পড়াশোনার অগ্রগতি এবং ফোকাস প্যাটার্ন ট্র্যাক করুন।</p>
                    <button class="mt-4 bg-[#008080] text-white px-4 py-2 rounded-lg hover:bg-[#006666] transition duration-300 text-sm">গার্ডিয়ান পোর্টালে প্রবেশ করুন</button>
                </div>
            </div>
        </section>

        <!-- Info Silder Section (Marquee) -->
        <section class="mb-16">
            <h2 class="styled-heading mb-8">আমাদের অর্জন ও তথ্য</h2>
            <div class="marquee-container">
                <div class="marquee-content">
                    
                    <!-- Marquee Item 1 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-lg bg-gray-50">
                        <img src="https://placehold.co/80x80/28a745/ffffff?text=Image+1" alt="Project Info 1" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#002D62]">ডিভাইস ইন্টিগ্রেশন</p>
                            <p class="text-sm text-gray-600">আরডুইনো বোর্ডের মাধ্যমে ডিসট্র্যাকশন ডিটেকশন।</p>
                        </div>
                    </div>
                    
                    <!-- Marquee Item 2 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-lg bg-gray-50">
                        <img src="https://placehold.co/80x80/007bff/ffffff?text=Image+2" alt="Project Info 2" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#002D62]">স্মার্ট রিপোর্টস</p>
                            <p class="text-sm text-gray-600">ফোকাস ও ডিস্ট্র্যাকশন প্যাটার্নের বিস্তারিত গ্রাফ।</p>
                        </div>
                    </div>

                    <!-- Marquee Item 3 -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-lg bg-gray-50">
                        <img src="https://placehold.co/80x80/ffc107/343a40?text=Image+3" alt="Project Info 3" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#002D62]">মোটিভেশন সিস্টেম</p>
                            <p class="text-sm text-gray-600">লক্ষ্য পূরণে সময়মতো অনুপ্রেরণামূলক বার্তা।</p>
                        </div>
                    </div>
                    
                    <!-- Repeat content to enable seamless loop -->
                    <div class="marquee-item flex items-center neon-border p-3 rounded-lg bg-gray-50">
                        <img src="https://placehold.co/80x80/28a745/ffffff?text=Image+1" alt="Project Info 1" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#002D62]">ডিভাইস ইন্টিগ্রেশন</p>
                            <p class="text-sm text-gray-600">আরডুইনো বোর্ডের মাধ্যমে ডিসট্র্যাকশন ডিটেকশন।</p>
                        </div>
                    </div>
                    <div class="marquee-item flex items-center neon-border p-3 rounded-lg bg-gray-50">
                        <img src="https://placehold.co/80x80/007bff/ffffff?text=Image+2" alt="Project Info 2" class="w-16 h-16 rounded-full mr-4 neon-border">
                        <div>
                            <p class="font-bold text-[#002D62]">স্মার্ট রিপোর্টস</p>
                            <p class="text-sm text-gray-600">ফোকাস ও ডিস্ট্র্যাকশন প্যাটার্নের বিস্তারিত গ্রাফ।</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-[#002D62] text-white py-6 mt-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <!-- Developed By Line (Italic Font) -->
            <p class="footer-dev-text text-sm mb-2">Developed by - Azmain Muttaqi Nishan</p>
            
            <!-- Project Slogan Line -->
            <p class="text-xs text-gray-400">Smart Study Focus Assistant | Turn Focus Into Success | সর্বস্বত্ব সংরক্ষিত © ২০২৫।</p>
        </div>
    </footer>

    <!-- JavaScript for Chart and Bluetooth Logic -->
    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // --- Performance Chart Logic ---
        const ctx = document.getElementById('performanceChart').getContext('2d');
        let chartType = 'focus'; // Default view
        
        // Data for Focus Time (Soft Green Color - #8FBC8F)
        const focusData = {
            labels: ['রবি', 'সোম', 'মঙ্গল', 'বুধ', 'বৃহস্পতি', 'শুক্র', 'শনি'],
            datasets: [{
                label: 'প্রতিদিনের ফোকাস (মিনিট)',
                data: [120, 150, 90, 180, 140, 210, 100],
                borderColor: '#8FBC8F', // Soft Green
                backgroundColor: 'rgba(143, 188, 143, 0.2)', // Light Green Fill
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#5F9EA0'
            }]
        };

        // Data for Distraction Pattern (Soft Red/Orange Color - #FF6347)
        const distractionData = {
            labels: ['রবি', 'সোম', 'মঙ্গল', 'বুধ', 'বৃহস্পতি', 'শুক্র', 'শনি'],
            datasets: [{
                label: 'প্রতিদিনের ডিস্ট্র্যাকশন (বার)',
                data: [5, 3, 7, 2, 4, 1, 6],
                borderColor: '#FF6347', // Tomato Red
                backgroundColor: 'rgba(255, 99, 71, 0.2)', // Light Red Fill
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#FF6347'
            }]
        };

        const config = {
            type: 'line',
            data: focusData, // Start with Focus Data
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    }
                }
            }
        };

        const performanceChart = new Chart(ctx, config);

        // Function to update chart data and button state
        function updateChart(dataType) {
            const focusBtn = document.getElementById('view-focus');
            const distractionBtn = document.getElementById('view-distraction');

            if (dataType === 'focus') {
                performanceChart.data = focusData;
                
                // Active Button styling for Focus
                focusBtn.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-indigo-100', 'hover:text-indigo-600');
                focusBtn.classList.add('bg-[#008080]', 'text-white');

                // Inactive Button styling for Distraction
                distractionBtn.classList.remove('bg-red-600', 'text-white');
                distractionBtn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-red-100', 'hover:text-red-600');

            } else { // 'distraction'
                performanceChart.data = distractionData;

                // Active Button styling for Distraction
                distractionBtn.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-red-100', 'hover:text-red-600');
                distractionBtn.classList.add('bg-red-600', 'text-white');

                // Inactive Button styling for Focus
                focusBtn.classList.remove('bg-[#008080]', 'text-white');
                focusBtn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-[#008080]/10', 'hover:text-[#008080]');
            }
            performanceChart.update();
        }

        // Event listeners for buttons
        document.getElementById('view-focus').addEventListener('click', () => updateChart('focus'));
        document.getElementById('view-distraction').addEventListener('click', () => updateChart('distraction'));
        
        // Ensure initial state is correct
        updateChart('focus');

        // --- Bluetooth Connection Logic for Guardian App ---
        const connectButton = document.getElementById('connect-bluetooth');
        const bluetoothStatus = document.getElementById('bluetooth-status');
        
        // Function to handle Bluetooth connection attempt
        connectButton.addEventListener('click', async () => {
            if (!navigator.bluetooth) {
                bluetoothStatus.textContent = "বর্তমান অবস্থা: আপনার ব্রাউজারে ব্লুটুথ API সাপোর্ট করে না। (ক্রোম/এজ ব্যবহার করুন)";
                bluetoothStatus.classList.add('text-red-500');
                return;
            }

            bluetoothStatus.textContent = "বর্তমান অবস্থা: ডিভাইসের জন্য সার্চ করা হচ্ছে...";
            bluetoothStatus.classList.remove('text-green-500', 'text-red-500');
            bluetoothStatus.classList.add('text-yellow-600');

            try {
                // Request Bluetooth device
                const device = await navigator.bluetooth.requestDevice({
                    // You would replace 'Arduino' with your specific device name or service UUID
                    filters: [{ namePrefix: 'Arduino' }], // Example: Filter devices starting with 'Arduino'
                    optionalServices: ['0000ffe0-0000-1000-8000-00805f9b34fb'] // Example: Common Serial Port Service UUID
                });

                bluetoothStatus.textContent = `বর্তমান অবস্থা: "${device.name}" এর সাথে সংযোগ স্থাপনের চেষ্টা চলছে...`;

                // Attempt to connect to the GATT server
                const server = await device.gatt.connect();
                
                bluetoothStatus.textContent = `বর্তমান অবস্থা: "${device.name}" এর সাথে সফলভাবে সংযুক্ত!`;
                bluetoothStatus.classList.remove('text-yellow-600');
                bluetoothStatus.classList.add('text-green-500');

                // Here you would typically get services and characteristics to read/write data
                console.log('Connected to GATT Server. Device:', device.name);
                
                // Add disconnect listener for real-world usage
                device.addEventListener('gattserverdisconnected', () => {
                    bluetoothStatus.textContent = "বর্তমান অবস্থা: সংযোগ বিচ্ছিন্ন হয়েছে।";
                    bluetoothStatus.classList.remove('text-green-500');
                    bluetoothStatus.classList.add('text-red-500');
                });

            } catch (error) {
                console.error('Bluetooth Connection Error:', error);
                bluetoothStatus.textContent = "বর্তমান অবস্থা: সংযোগ ব্যর্থ। ডিভাইসের পাওয়ার বা সেটিংস চেক করুন।";
                bluetoothStatus.classList.remove('text-yellow-600');
                bluetoothStatus.classList.add('text-red-500');
            }
        });

        // --- Simple Focus Timer (Placeholder) ---
        let isFocusing = false;
        let timeInSeconds = 25 * 60;
        let timerInterval;

        function updateTimerDisplay() {
            const minutes = String(Math.floor(timeInSeconds / 60)).padStart(2, '0');
            const seconds = String(timeInSeconds % 60).padStart(2, '0');
            document.getElementById('focus-timer').textContent = `${minutes}:${seconds}`;
        }

        document.getElementById('start-focus').addEventListener('click', () => {
            if (isFocusing) {
                clearInterval(timerInterval);
                isFocusing = false;
                document.getElementById('start-focus').textContent = 'ফোকাস শুরু করুন';
                document.getElementById('focus-timer').classList.remove('text-red-500');
                document.getElementById('focus-timer').classList.add('text-[#008080]');
            } else {
                isFocusing = true;
                document.getElementById('start-focus').textContent = 'সেশন বন্ধ করুন';
                document.getElementById('focus-timer').classList.remove('text-[#008080]');
                document.getElementById('focus-timer').classList.add('text-red-500'); // Red when active/counting down
                timeInSeconds = 25 * 60; // Reset or continue
                updateTimerDisplay();

                timerInterval = setInterval(() => {
                    timeInSeconds--;
                    updateTimerDisplay();
                    if (timeInSeconds <= 0) {
                        clearInterval(timerInterval);
                        isFocusing = false;
                        document.getElementById('start-focus').textContent = 'ফোকাস সেশন সমাপ্ত';
                        document.getElementById('focus-timer').textContent = '00:00';
                    }
                }, 1000);
            }
        });
    </script>
</body>
</html>
